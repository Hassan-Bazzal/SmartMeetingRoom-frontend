<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Meeting Room System - Dashboard</title>
  <!-- Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/main.min.css" rel="stylesheet">
  <style>
    body {
      overflow-x: hidden;
      scroll-behavior: smooth;
    }
    .sidebar {
      width: 220px;
      min-height: 100vh;
      background-color: #0d6efd;
      color: white;
      position: fixed;
      top: 0;
      left: 0;
      z-index: 1000;
      transition: 0.3s;
    }
    .sidebar a {
      color: white;
      text-decoration: none;
      display: block;
      padding: 1rem;
      transition: 0.2s;
    }
    .sidebar a:hover {
      background-color: #0b5ed7;
    }
    .content {
      margin-left: 220px;
      padding: 2rem;
    }
    @media (max-width: 768px) {
      .sidebar {
        left: -220px;
      }
      .sidebar.show {
        left: 0;
      }
      .content {
        margin-left: 0;
      }
    }
  </style>
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/main.min.css" rel="stylesheet">

</head>
<body>
  <script>
  // Check if a token exists in localStorage
const token = localStorage.getItem('token');
if (!token) {
    window.location.href = 'login.html';
} else {
    fetch('http://127.0.0.1:8000/api/me', {
        headers: {
            'Authorization': `Bearer ${token}`,
            'Accept': 'application/json'
        }
    })
    .then(res => {
        if (!res.ok) throw new Error('Unauthorized');
        return res.json();
    })
    .then(data => {
        document.getElementById('profileName').innerText = data.name;
        document.getElementById('profileRole').innerText = data.role;
    })
    .catch(err => {
        localStorage.removeItem('token');
        window.location.href = 'login.html';
    });
}
</script>

<!-- Sidebar -->
<div class="sidebar">
  <h3 class="text-center py-3">Internal System</h3>
  <a href="#dashboard"><i class="fas fa-home me-2"></i> Dashboard</a>
  <a href="#rooms"><i class="fas fa-door-open me-2"></i> Rooms</a>
  <a href="#booking"><i class="fas fa-calendar-check me-2"></i> Booking</a>
  <a href="#meetings"><i class="fas fa-file-alt me-2"></i> Meetings</a>
  <a href="#calendar"><i class="fas fa-calendar-alt me-2"></i> Calendar</a>
  <a href="#profile"><i class="fas fa-user me-2"></i> Profile</a>
    <a href="#users"><i class="fas fa-users me-2"></i> Users</a>
  <a href="#" data-bs-toggle="modal" data-bs-target="#logoutModal"><i class="fas fa-sign-out-alt me-2"></i> Logout</a>

</div>

<!-- Mobile Header -->
<nav class="navbar navbar-light bg-light d-md-none">
  <div class="container-fluid">
    <button class="btn btn-primary" id="menu-toggle"><i class="fas fa-bars"></i></button>
    <span class="navbar-brand ms-2">Meeting Room System</span>
  </div>
</nav>

<!-- Content -->
<div class="content">

  <!-- Dashboard -->
  <div id="dashboard">
    <h1>Dashboard</h1>
    <div class="row g-4 my-4">
      <div class="col-md-4">
        <div class="card shadow-sm">
          <div class="card-body">
            <h5 class="card-title">Total Rooms</h5>
            <p class="card-text display-6">5</p>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card shadow-sm">
          <div class="card-body">
            <h5 class="card-title">Upcoming Meetings</h5>
            <p class="card-text display-6">12</p>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card shadow-sm">
          <div class="card-body">
            <h5 class="card-title">Pending Bookings</h5>
            <p class="card-text display-6">3</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Rooms -->
  <div id="rooms" class="my-5">
    <h2>Rooms</h2>
    <div class="row row-cols-1 row-cols-md-3 g-4 mt-2">
      <div class="col">
        <div class="card h-100 shadow-sm">
          <img src="images/room1.jpg" class="card-img-top" alt="Room 1">
          <div class="card-body">
            <h5 class="card-title">Exclusive Room</h5>
            <p class="card-text">Capacity: 10 | Projector: Yes | Video Conferencing: Yes</p>
            <a href="#booking" class="btn btn-primary">Book Now</a>
          </div>
        </div>
      </div>
      <div class="col">
        <div class="card h-100 shadow-sm">
          <img src="images/room2.jpg" class="card-img-top" alt="Room 2">
          <div class="card-body">
            <h5 class="card-title">Luxury Room</h5>
            <p class="card-text">Capacity: 15 | Projector: Yes | Video Conferencing: Yes</p>
            <a href="#booking" class="btn btn-primary">Book Now</a>
          </div>
        </div>
      </div>
      <div class="col">
        <div class="card h-100 shadow-sm">
          <img src="images/room3.jpg" class="card-img-top" alt="Room 3">
          <div class="card-body">
            <h5 class="card-title">Deluxe Room</h5>
            <p class="card-text">Capacity: 20 | Projector: Yes | Video Conferencing: Yes</p>
            <a href="#booking" class="btn btn-primary">Book Now</a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Booking -->
  <div id="booking" class="my-5">
    <h2>Book a Room</h2>
    <form class="mt-3">
      <div class="row g-3">
        <div class="col-md-6">
          <label for="roomSelect" class="form-label">Select Room</label>
          <select id="roomSelect" class="form-select">
            <option selected>Choose...</option>
            <option>Exclusive Room</option>
            <option>Luxury Room</option>
            <option>Deluxe Room</option>
          </select>
        </div>
        <div class="col-md-6">
          <label for="date" class="form-label">Date</label>
          <input type="date" id="date" class="form-control">
        </div>
        <div class="col-md-6">
          <label for="startTime" class="form-label">Start Time</label>
          <input type="time" id="startTime" class="form-control">
        </div>
        <div class="col-md-6">
          <label for="endTime" class="form-label">End Time</label>
          <input type="time" id="endTime" class="form-control">
        </div>
      </div>
      <button type="submit" class="btn btn-primary mt-3">Book Room</button>
    </form>
  </div>

  <!-- Meetings -->
  <div id="meetings" class="my-5">
    <h2>Meetings</h2>
    <div class="table-responsive mt-3">
      <table class="table table-striped table-bordered align-middle">
        <thead class="table-primary">
          <tr>
            <th>#</th>
            <th>Title</th>
            <th>Room</th>
            <th>Date</th>
            <th>Time</th>
            <th>Organizer</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>1</td>
            <td>Project Kickoff</td>
            <td>Exclusive Room</td>
            <td>2025-08-15</td>
            <td>10:00 - 11:00</td>
            <td>John Doe</td>
            <td>
              <button class="btn btn-sm btn-primary" data-bs-toggle="modal" data-bs-target="#momModal">Add MoM</button>
            </td>
          </tr>
          <tr>
            <td>2</td>
            <td>Design Review</td>
            <td>Luxury Room</td>
            <td>2025-08-16</td>
            <td>14:00 - 15:30</td>
            <td>Jane Smith</td>
            <td>
              <button class="btn btn-sm btn-primary" data-bs-toggle="modal" data-bs-target="#momModal">Add MoM</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- MoM Modal -->
  <div class="modal fade" id="momModal" tabindex="-1" aria-labelledby="momModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header bg-primary text-white">
          <h5 class="modal-title" id="momModalLabel">Add Minutes of Meeting (MoM)</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form>
            <div class="mb-3">
              <label for="meetingTitle" class="form-label">Meeting Title</label>
              <input type="text" class="form-control" id="meetingTitle" placeholder="Enter meeting title">
            </div>
            <div class="mb-3">
              <label for="discussionPoints" class="form-label">Discussion Points</label>
              <textarea class="form-control" id="discussionPoints" rows="3"></textarea>
            </div>
            <div class="mb-3">
              <label for="decisions" class="form-label">Decisions</label>
              <textarea class="form-control" id="decisions" rows="2"></textarea>
            </div>
            <div class="mb-3">
              <label for="actionItems" class="form-label">Action Items</label>
              <textarea class="form-control" id="actionItems" rows="2" placeholder="Assign tasks to attendees"></textarea>
            </div>
            <div class="mb-3">
              <label for="attachments" class="form-label">Attachments (optional)</label>
              <input type="file" class="form-control" id="attachments" multiple>
            </div>
            <button type="submit" class="btn btn-primary">Save MoM</button>
          </form>
        </div>
      </div>
    </div>
  </div>

<!-- Calendar -->
<div id="calendar" class="my-5 container">
  <h2 class="mb-4">Room Schedule Calendar</h2>
  <div id="roomCalendar" style="height: 650px;"></div> <!-- Calendar container -->
</div>


  <!-- Profile -->
  <div id="profile" class="my-5 container">
    <h2 class="mb-4">My Profile</h2>
    <div class="row">
      <div class="col-lg-4 mb-4">
        <div class="card">
          <div class="card-body text-center">
            <h5 id="profileName">John Doe</h5>
            <p id="profileRole">Employee</p>
          </div>
        </div>
      </div>
      <div class="col-lg-8">
        <div class="card">
          <div class="card-body">
            <form id="profileForm">
              <div class="mb-3">
                <label for="name" class="form-label">Full Name</label>
                <input type="text" class="form-control" id="name" value="John Doe">
              </div>
              <div class="mb-3">
                <label for="email" class="form-label">Email</label>
                <input type="email" class="form-control" id="email" value="john.doe@example.com" readonly>
              </div>
              <div class="mb-3">
                <label for="phone" class="form-label">Phone Number</label>
                <input type="tel" class="form-control" id="phone" value="+961 70 000 000">
              </div>
              <button type="submit" class="btn btn-primary">Save Changes</button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
    <div id="users" class="my-5">
  <h2 class="mb-4">Register New User</h2>

  <div class="card shadow-sm">
    <div class="card-body">
      <form id="registerForm">
        <div class="row g-3">
          <div class="col-md-6">
            <label for="newName" class="form-label">Full Name</label>
            <input type="text" class="form-control" id="newName" placeholder="Enter full name" required>
          </div>
          <div class="col-md-6">
            <label for="newEmail" class="form-label">Email</label>
            <input type="email" class="form-control" id="newEmail" placeholder="Enter email" required>
          </div>
          <div class="col-md-6">
            <label for="newPhone" class="form-label">Phone</label>
            <input type="tel" class="form-control" id="newPhone" placeholder="Enter phone number" required>
          </div>
          <div class="col-md-6">
            <label for="newRole" class="form-label">Role</label>
            <select id="newRole" class="form-select" required>
              <option value="" selected disabled>Choose role</option>
              <option value="employee">Employee</option>
              <option value="admin">Admin</option>
              <option value="guest">Guest</option>
            </select>
          </div>
          <div class="col-md-6">
            <label for="newPassword" class="form-label">Password</label>
            <input type="password" class="form-control" id="newPassword" placeholder="Enter password" required>
          </div>
          <div class="col-md-6">
            <label for="confirmPassword" class="form-label">Confirm Password</label>
            <input type="password" class="form-control" id="confirmPassword" placeholder="Confirm password" required>
          </div>
        </div>
        <button type="submit" class="btn btn-primary mt-3">Register User</button>
      </form>
    </div>
  </div>
</div>
   <!-- Logout Modal -->
<div class="modal fade" id="logoutModal" tabindex="-1" aria-labelledby="logoutModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header bg-danger text-white">
        <h5 class="modal-title" id="logoutModalLabel">Confirm Logout</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        Are you sure you want to logout?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <a href="login.html" class="btn btn-danger">Logout</a>
      </div>
    </div>
  </div>
</div>


</div>

<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/main.min.js"></script>
<script>
  // Sidebar toggle
  const toggleBtn = document.getElementById('menu-toggle');
  const sidebar = document.querySelector('.sidebar');
  toggleBtn?.addEventListener('click', () => sidebar.classList.toggle('show'));

  // Initialize FullCalendar
document.addEventListener('DOMContentLoaded', function() {
    var calendarEl = document.getElementById('roomCalendar');
    var calendar = new FullCalendar.Calendar(calendarEl, {
        initialView: 'dayGridMonth',
        initialDate: '2025-08-15',
        headerToolbar: {
            left: 'prev,next today',
            center: 'title',
            right: 'dayGridMonth,timeGridWeek,timeGridDay'
        },
        navLinks: true,
        editable: false,
        dayMaxEvents: true,
        events: [
            { title: 'Project Kickoff - Exclusive Room', start: '2025-08-15T10:00:00', end: '2025-08-15T11:00:00', color: '#0d6efd' },
            { title: 'Design Review - Luxury Room', start: '2025-08-16T14:00:00', end: '2025-08-16T15:30:00', color: '#198754' },
            { title: 'Team Sync - Deluxe Room', start: '2025-08-17T09:00:00', end: '2025-08-17T10:00:00', color: '#ffc107' }
        ]
    });
    calendar.render();
});

</script>
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/main.min.js"></script>

</body>
</html>
